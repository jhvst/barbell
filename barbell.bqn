pairs â† {âŸ¨Â¯4â†“ğ•©,(â€¢file.Chars â€¢wdpathâˆ¾"/"âˆ¾ğ•©)âŸ©}Â¨{4=+Â´Â¯4â†‘ğ•©âˆŠ".bar"}Â¨âŠ¸/â€¢file.List â€¢wdpathâˆ¾"/."
input â† â€¢file.Chars â€¢wdpathâˆ¾"/"âˆ¾ âŠ‘ â€¢args

b â† "|"â·input
e â† "|"â·input

frags â† (+`e+Â»b) âŠ¸ âŠ” input
keys â† {0âŠ‘ğ•©}Â¨pairs
vals â† {1âŠ‘ğ•©}Â¨pairs
mask â† keysâŠfrags
values â† ((â‰ pairs)â‰ âŠ¢) âŠ¸ / keys âŠ frags
reps â† (valuesâŠvals)âŒ¾(((â‰ pairs)â‰ mask)âŠ¸/) frags

changed â† {âŸ¨ğ•©-1,ğ•©,ğ•©+1âŸ©}Â¨(({âŸ¨1,0,1âŸ©â‰¡ğ•©}Â¨(Â¯3â†‘Â¨1â†“â†‘frags âˆŠ reps))âŠ¸/) ({ğ•©-1}Â¨â†•â‰ frags)
neighbors â† {âŸ¨Â¯1â†“0âŠ‘ğ•©,1âŠ‘ğ•©,1â†“2âŠ‘ğ•©âŸ©}Â¨{ğ•©âŠreps}Â¨changed
nmask â† {+Â´ğ•©â·(âˆ¾changed)}Â¨â†•â‰ frags
â€¢Out âˆ¾(âˆ¾neighbors)âŒ¾(nmaskâŠ¸/) reps

